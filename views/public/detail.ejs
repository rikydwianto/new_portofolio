<div class="container project-detail-page">
    <a href="/#portfolio" class="back-link">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Back to Portfolio
    </a>

    <header class="detail-header">
        <div class="detail-meta-top">
            <span class="detail-category">
                <%= project.category_name %>
            </span>
            <span class="detail-date">
                <%= new Date(project.created_at).toLocaleDateString('id-ID', { year: 'numeric' , month: 'long' ,
                    day: 'numeric' }) %>
            </span>
        </div>
        <h1 class="detail-title">
            <%= project.title %>
        </h1>
        <% if(project.tech_stack) { %>
            <div class="detail-tech">
                <% project.tech_stack.split(',').forEach(tech=> { %>
                    <span class="tech-pill">
                        <%= tech.trim() %>
                    </span>
                    <% }) %>
            </div>
            <% } %>
    </header>

    <!-- Main Media -->
    <div class="detail-media">
        <% if (project.media_type==='video' ) { %>
            <div class="video-wrapper">
                <iframe src="<%= project.media_url %>" frameborder="0" allowfullscreen></iframe>
            </div>
            <% } else if (project.media_type==='pdf' ) { %>
                <div class="pdf-wrapper">
                    <embed src="<%= project.media_url %>" type="application/pdf" width="100%" height="600px" />
                </div>
                <% } else { %>
                    <img src="<%= project.thumbnail %>" alt="<%= project.title %>" class="detail-main-image"
                        onerror="this.style.display='none'">
                    <% } %>
    </div>

    <!-- Gallery (Multiple Images) -->
    <% if (typeof images !=='undefined' && images.length> 1) { %>
        <div class="detail-gallery">
            <h3>Project Gallery</h3>
            <div class="gallery-grid">
                <% images.forEach(img=> { %>
                    <div class="gallery-item">
                        <img src="<%= img.image_url %>" alt="Project Image" loading="lazy"
                            onerror="this.parentElement.style.display='none'">
                    </div>
                    <% }) %>
            </div>
        </div>
        <% } %>

            <div class="detail-content">
                <h3>About This Project</h3>
                <div class="detail-description">
                    <%- project.description.replace(/\n/g, '<br>' ) %>
                </div>
            </div>

            <% if(project.media_url && project.media_type==='web_link' ) { %>
                <div class="detail-action">
                    <a href="<%= project.media_url %>" target="_blank" class="btn btn-primary btn-lg">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                            <polyline points="15 3 21 3 21 9"></polyline>
                            <line x1="10" y1="14" x2="21" y2="3"></line>
                        </svg>
                        Visit Live Website
                    </a>
                </div>
                <% } %>
</div>